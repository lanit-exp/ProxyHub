# RemoteHub

## Общее назначение
Сервис предназначен для покдлючения с последующим проксированием запросов на определенные узлы. Количество узлов неограниченно.

## Регистрация узлов

Для регистрации узлов необходимо отправить запрос по адресу http://host:port/register
(например http://localhost:4444/node/register) с JSON, в котором содержатся основные параметры ноды.
Пример JSON:

```
{
    "host" : "host",
    "port" : "port",
    "nodeName" : "nodeName"
}
```
, где параметр "nodeName" можно опустить, т.к. в таком случае хаб сам сгенерирует имя узла. 
В качестве альтеранативы, можно зарегистрировать узлы при помощи файла nodes.yaml. Однако, в таком случае, 
необходимо обязательно задать имя узла, иначе, это приведет к ошибке чтения файла. При запуске jar-файла с сервисом 
обязательно необходимо, чтобы данный файл находился в той же директории, что и само приложение.

Получить информацию о всех узлах можно, отправив GET-запрос по адресу 
http://host:port/node/status (например http://localhost:4444/node/status).

## Управление узлами
При необходимости запуска тестов на определенном узле, необходимо добавить в capabilities веб драйвера параметр 
"nodeName", указав в нем его имя.

## Отправка запроса напрямую в веб драйвер.
В хабе присутствует возможность напрямую отправлять запросы в веб драйвер без использования прокси драйвера. Для
этого необходимо зарегистрировать узел, указав адрес, порт и, обязательно, имя узла. После этого, добавляем в capabilities веб драйвера параметр 
"nodeName", указав в нем его имя.

## API
* ```POST: /rest/api/v1/node/register``` - регистрация узла
* ```POST: /rest/api/v1/node/status``` - статус по текущим узлам
* ```GET: /rest/api/v1/node/clear``` - удалить все узлы
* ```GET: /rest/api/v1/node/delete/{name}``` - удалить узел по имени
* ```GET: /rest/api/v1/timeout/set/{value}``` - задать величину таймаута для высвобождения занятого узла в секундах (в случае некорректного завершения работы со стороны фреймворка)
  По умолчанию 10 секунд.